
message(STATUS "Installing dynamic libraries")

if("@TAISEI_OSX_LIB_ROOT@" STREQUAL "")
    message(FATAL_ERROR "You must set TAISEI_OSX_LIB_ROOT, and possibly TAISEI_OSX_COMMAND_PREFIX, to use the install rule.")
endif()

execute_process(
    COMMAND "@PROJECT_SOURCE_DIR@/scripts/osx-install-dylibs.sh"
            "--iknowwhatimdoing"
            "@OSX_BINARY@"
            "@DYLIBS_DIR_FINAL@"
            "@DYLIBS_DIR_INTERMEDIATE@"
            "@DYLIBS_DIR_NAME@"
            "@TAISEI_OSX_LIB_ROOT@"
            "@TAISEI_OSX_COMMAND_PREFIX@"
    WORKING_DIRECTORY "@CMAKE_INSTALL_PREFIX@"
    RESULT_VARIABLE ERRCODE
)

if(NOT ERRCODE EQUAL 0)
    message(FATAL_ERROR "OSX install script failed: ${ERRCODE}")
endif()
